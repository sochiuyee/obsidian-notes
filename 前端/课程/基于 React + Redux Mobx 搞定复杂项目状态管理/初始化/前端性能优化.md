业务逻辑多样 -> 代码文件增多 -> 打包速度慢 -> 开发效率降低

>[!INFO] 找到影响性能的问题（如何找？）

安装工程性能检测工具：speed-measure-webpack-plugin
[speed-measure-webpack-plugin官网](https://gitcode.net/mirrors/stephencookdev/speed-measure-webpack-plugin?utm_source=csdn_github_accelerator)
`npm install --save-dev speed-measure-webpack-plugin`

使用性能检测功能完成性能（打包速度）检测
```js
const SpeedMeasurePlugin = require('speed-measure-webpack-plugin');
const smp = new SpeedMeasurePlugin();
module.exports = smp.wrap(merge(webpackConfigBase, webpackConfigDev));
```
![[Pasted image 20230220235018.png]]

对性能影响的关键问题进行优化
ts-loader 处理时间耗时长：2.46秒

---

>[!abstract] 针对关键问题点指定合理的解决方案

针对ts-loader 可以在ts-loader官方文档查看解决方法[ts-loader npm 官网](https://www.npmjs.com/package/ts-loader)

![[Pasted image 20230221000258.png]]
```js
{
	test: /\.tsx?$/,
	use: {
		loader: 'ts-loader',
		options: {
			transpileOnly: true,
		},
	},
},
```

![[Pasted image 20230221000212.png]]
ts-loader耗时大大缩小

---

> [!caution] 全面回归验证

在ts-loader 配置项里配了transpileOnly虽然能够缩短打包时间，但是在ts文件中类型判断出了问题
![[Pasted image 20230221001107.png]]

###### 解决transpileOnly 导致ts类型判断问题：

`transpileOnly` 能够加快ts-loader处理时间，但是单独在ts-loader 配置transpileOnly 会导致ts类型检查不能生效，需要结合fork-ts-checker-webpack-plugin使用

`npm install --save-dev fork-ts-checker-webpack-plugin`

```js
const ForkTsCheckerWebpackPlugin = require('fork-ts-checker-webpack-plugin');

const webpackConfig = {
  context: __dirname, // to automatically find tsconfig.json
  entry: './src/index.ts',
  module: {
    rules: [
      {
        test: /\.tsx?$/,
        loader: 'ts-loader',
        options: {
          // disable type checker - we will use it in fork plugin
          transpileOnly: true
        }
      }
    ]
  },
  plugins: [new ForkTsCheckerWebpackPlugin()]
};
```









